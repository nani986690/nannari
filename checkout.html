<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="format-detection" content="telephone=no">
<meta name="description" content="Buy Nannari Dharmavaram Online - Secure checkout for PNR Nannari herbal drinks. Easy payment options, fast delivery. Order authentic Nannari now.">
<meta name="keywords" content="Buy Nannari, Nannari Dharmavaram checkout, PNR Nannari order, order herbal drink, premium beverages, buy online">
<meta name="robots" content="index, follow">

<!-- Open Graph Meta Tags -->
<meta property="og:type" content="website">
<meta property="og:title" content="Buy Nannari Dharmavaram - Order Now">
<meta property="og:description" content="Secure checkout for premium Nannari Dharmavaram (PNR Nannari) herbal drinks.">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/nani986690/nannari@main/logo.png">
<meta property="og:url" content="https://nannari.co.in/checkout.html">

<!-- Twitter Card Tags -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Buy Nannari Dharmavaram - Order Now">
<meta name="twitter:description" content="Secure checkout for premium Nannari Dharmavaram (PNR Nannari) herbal drinks.">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/nani986690/nannari@main/logo.png">

<!-- Favicon -->
<link rel="icon" type="image/png" href="https://cdn.jsdelivr.net/gh/nani986690/nannari@main/logo.png">

<title>Buy Nannari Dharmavaram Online - PNR Nannari Checkout</title>

<style>
body {
  font-family: Inter, Arial, sans-serif;
  background: #f6f6f6;
  padding: 15px;
}

.checkout-container {
  max-width: 420px;
  margin: auto;
  background: #fff;
  border-radius: 18px;
  padding: 18px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.1);
}

.back-btn {
  background: none;
  border: none;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  margin-bottom: 10px;
}

.hero-img {
  width: 100%;
  height: 410px;
  border-radius: 16px;
  object-fit: cover;
  margin-bottom: 15px;
}

.product-box {
  margin-bottom: 15px;
}

.product-title {
  font-weight: 700;
  font-size: 16px;
}

.product-meta {
  font-size: 13px;
  color: #666;
  margin: 5px 0;
}

.summary {
  background: #fafafa;
  border-radius: 12px;
  padding: 12px;
  margin-bottom: 15px;
}

.summary div {
  display: flex;
  justify-content: space-between;
  font-size: 14px;
  margin-bottom: 6px;
}

.summary .total {
  font-weight: 700;
  font-size: 16px;
}

input, textarea, select {
  width: 100%;
  padding: 12px;
  border-radius: 8px;
  border: 1px solid #ccc;
  margin-bottom: 12px;
  font-size: 14px;
}

input[readonly] {
  background-color: #f9f9f9;
  cursor: not-allowed;
}

.buy-btn {
  width: 100%;
  padding: 14px;
  font-size: 16px;
  font-weight: 700;
  background: #ffa000;
  border: none;
  border-radius: 12px;
  cursor: pointer;
}
/* MOBILE INPUT OVERFLOW FIX */
*, *::before, *::after {
  box-sizing: border-box;
}

.checkout-container {
  width: 100%;
  max-width: 420px;
}

input, textarea, select {
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
}

/* Mobile specific */
@media (max-width: 480px) {
  body {
    padding: 10px;
  }

  .checkout-container {
    padding: 16px;
    border-radius: 14px;
  }

  input, textarea, select {
    font-size: 15px;
    padding: 12px;
  }

  .buy-btn {
    font-size: 15px;
    padding: 14px;
  }
}

/* Desktop specific */
@media (min-width: 1024px) {
  .hero-img {
    height: 500px;
    object-fit: contain;
    background: #f9f9f9;
  }
}
.price-summary {
  margin-top: 20px;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
  font-size: 14px;
  color: #111;
}

.price-summary .row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 6px 0;
}

.price-summary .row span:first-child {
  color: #111;
}

.price-summary .row span:last-child {
  color: #111;
}

/* Strike delivery */
.price-summary .strike {
  text-decoration: line-through;
  color: #777;
}

/* Total (before free delivery) */
.price-summary .total span:first-child {
  font-weight: 500;
}

/* FREE delivery line */
.price-summary .free {
  color: #067D62; /* Amazon green */
  font-weight: 600;
}

/* Divider line */
.price-summary .divider {
  border-top: 1px solid #ddd;
  margin: 10px 0;
}

/* Order Total (bold & big) */
.price-summary .order-total {
  font-size: 18px;
  font-weight: 800;
  margin-top: 6px;
}

.price-summary .order-total span:last-child {
  font-weight: 800;
}
.nannari-footer {
    background-color: #1a1a1a; /* Dark Premium Background */
    color: #ffffff;
    padding: 60px 0 20px 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

.footer-container {
    max-width: 1200px;
    margin: 0 auto;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 40px;
    padding: 0 20px;
}

.footer-logo {
    font-size: 28px;
    font-weight: bold;
    color: #f39c12; /* Golden/Nannari color */
    margin-bottom: 15px;
    letter-spacing: 2px;
}

.footer-section h3 {
    font-size: 18px;
    margin-bottom: 20px;
    border-bottom: 2px solid #f39c12;
    display: inline-block;
    padding-bottom: 5px;
}

.footer-section p {
    line-height: 1.6;
    color: #ccc;
}

.footer-section ul {
    list-style: none;
    padding: 0;
}

.footer-section ul li {
    margin-bottom: 12px;
}

.footer-section ul li a {
    color: #ccc;
    text-decoration: none;
    transition: 0.3s;
}

.footer-section ul li a:hover {
    color: #f39c12;
    padding-left: 5px;
}

/* Social Icons Styling */
.social-links {
    margin-top: 20px;
}

.social-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    background: #333;
    color: white;
    border-radius: 50%;
    margin-right: 10px;
    text-decoration: none;
    transition: all 0.3s ease;
}

.social-icon:hover {
    background: #f39c12;
    transform: translateY(-5px);
}

.footer-bottom {
    text-align: center;
    margin-top: 50px;
    padding-top: 20px;
    border-top: 1px solid #333;
    font-size: 14px;
    color: #777;
}


.cart-item {
  display: flex;
  align-items: center;
  gap: 15px;
  background: #fff;
  padding: 12px;
  border-radius: 12px;
  margin-bottom: 12px;
  border: 1px solid #eee;
}

.cart-item img {
  width: 52px;
  height: 70px;
  border-radius: 8px;
  object-fit: cover;
}

.cart-item-details {
  flex: 1;
}

.cart-item-title {
  font-weight: 700;
  font-size: 14px;
}

.cart-item-meta {
  font-size: 12px;
  color: #666;
}

.remove-btn {
  background: #ff4d4d;
  color: #fff;
  border: none;
  padding: 5px 10px;
  border-radius: 6px;
  font-size: 12px;
  cursor: pointer;
  font-weight: 600;
}

.empty-cart-msg {
  text-align: center;
  padding: 20px;
  font-weight: 600;
  color: #888;
}
</style>
</head>

<body>

<div class="checkout-container">

  <!-- Back Button -->
  <button class="back-btn" onclick="history.back()">‚Üê Back</button>

  <!-- Cart Items Container -->
  <div id="cartItemsContainer"></div>

  <div class="price-summary">

  <div class="row">
    <span>Items:</span>
    <span id="itemsPrice">‚Çπ0.00</span>
  </div>

  <div class="row">
    <span>Delivery:</span>
    <span class="strike">‚Çπ99.00</span>
  </div>

  <div class="row total">
    <span>Total:</span>
    <span id="totalPrice">‚Çπ0.00</span>
  </div>

  <div class="row free">
    <span style="color: green;">FREE Delivery</span>
    <span style="color: green;">-‚Çπ99.00</span>
  </div>

  <div class="row order-total">
    <span>Order Total:</span>
    <span id="orderTotal">‚Çπ0.00</span>
  </div>

</div>


 <!-- User Form -->
<input type="text" id="fullName" placeholder="Full Name *" required>

<input type="tel" id="mobile" placeholder="Mobile Number *" maxlength="10" required>

<input type="tel" id="pincode" placeholder="Pincode *" maxlength="6" required>

<input type="text" id="city" placeholder="City *" readonly required>

<input type="text" id="district" placeholder="District *" readonly required>

<select id="state" required>
  <option value="">Select State *</option>
  <option value="Andhra Pradesh">Andhra Pradesh</option>
  <option value="Arunachal Pradesh">Arunachal Pradesh</option>
  <option value="Assam">Assam</option>
  <option value="Bihar">Bihar</option>
  <option value="Chhattisgarh">Chhattisgarh</option>
  <option value="Goa">Goa</option>
  <option value="Gujarat">Gujarat</option>
  <option value="Haryana">Haryana</option>
  <option value="Himachal Pradesh">Himachal Pradesh</option>
  <option value="Jharkhand">Jharkhand</option>
  <option value="Karnataka">Karnataka</option>
  <option value="Kerala">Kerala</option>
  <option value="Madhya Pradesh">Madhya Pradesh</option>
  <option value="Maharashtra">Maharashtra</option>
  <option value="Manipur">Manipur</option>
  <option value="Meghalaya">Meghalaya</option>
  <option value="Mizoram">Mizoram</option>
  <option value="Nagaland">Nagaland</option>
  <option value="Odisha">Odisha</option>
  <option value="Punjab">Punjab</option>
  <option value="Rajasthan">Rajasthan</option>
  <option value="Sikkim">Sikkim</option>
  <option value="Tamil Nadu">Tamil Nadu</option>
  <option value="Telangana">Telangana</option>
  <option value="Tripura">Tripura</option>
  <option value="Uttar Pradesh">Uttar Pradesh</option>
  <option value="Uttarakhand">Uttarakhand</option>
  <option value="West Bengal">West Bengal</option>
  <option value="Andaman and Nicobar Islands">Andaman and Nicobar Islands</option>
  <option value="Chandigarh">Chandigarh</option>
  <option value="Dadra and Nagar Haveli and Daman and Diu">Dadra and Nagar Haveli and Daman and Diu</option>
  <option value="Delhi">Delhi</option>
  <option value="Jammu and Kashmir">Jammu and Kashmir</option>
  <option value="Ladakh">Ladakh</option>
  <option value="Lakshadweep">Lakshadweep</option>
  <option value="Puducherry">Puducherry</option>
</select>

<input type="text" id="house" placeholder="House / Flat No *" required>

<input type="text" id="street" placeholder="Street / Area *" required>

<button class="buy-btn" onclick="placeOrder()">Confirm Order</button>

<script>
  const cartItemsContainer = document.getElementById("cartItemsContainer");
  const itemsPriceEl = document.getElementById("itemsPrice");
  const totalPriceEl = document.getElementById("totalPrice");
  const orderTotalEl = document.getElementById("orderTotal");
  const buyBtn = document.querySelector(".buy-btn");
  
  const pincodeInput = document.getElementById("pincode");
  const cityInput = document.getElementById("city");
  const districtInput = document.getElementById("district");
  const stateSelect = document.getElementById("state");

  const DELIVERY_CHARGE = 99;
  let cart = JSON.parse(localStorage.getItem("cart")) || [];
  let isPincodeValid = false;

  function renderCart() {
    cartItemsContainer.innerHTML = "";
    
    if (cart.length === 0) {
      cartItemsContainer.innerHTML = '<div class="empty-cart-msg">Your cart is empty üõí</div>';
      updateSummary();
      return;
    }

    cart.forEach(item => {
      const itemEl = document.createElement("div");
      itemEl.className = "cart-item";
      itemEl.innerHTML = `
        <img src="https://uploads.onecompiler.io/44544cwde/449fkyese/1000374318.jpg" alt="${item.name}">
        <div class="cart-item-details">
          <div class="cart-item-title">${item.name}</div>
          <div class="cart-item-meta">${item.size} (${item.volume})</div>
          <div class="cart-item-meta">Qty: ${item.qty} | ‚Çπ${item.price} each</div>
        </div>
        <button class="remove-btn" onclick="removeItem(${item.id})">Remove</button>
      `;
      cartItemsContainer.appendChild(itemEl);
    });

    updateSummary();
  }

  function removeItem(id) {
    cart = cart.filter(item => item.id !== id);
    localStorage.setItem("cart", JSON.stringify(cart));
    renderCart();
  }

  function updateSummary() {
    const itemsTotal = cart.reduce((sum, item) => sum + (item.price * item.qty), 0);
    const totalBeforeFree = itemsTotal > 0 ? itemsTotal + DELIVERY_CHARGE : 0;
    
    itemsPriceEl.innerText = `‚Çπ${itemsTotal}.00`;
    totalPriceEl.innerText = `‚Çπ${totalBeforeFree}.00`;
    orderTotalEl.innerText = `‚Çπ${itemsTotal}.00`;

    if (itemsTotal === 0) {
      buyBtn.disabled = true;
      buyBtn.style.opacity = "0.5";
      buyBtn.style.cursor = "not-allowed";
    } else {
      buyBtn.disabled = false;
      buyBtn.style.opacity = "1";
      buyBtn.style.cursor = "pointer";
    }
  }

  // Pincode Auto-fill Logic
  pincodeInput.addEventListener("input", function() {
    const pin = this.value.trim();
    if (pin.length === 6) {
      fetchPincodeData(pin);
    } else {
      isPincodeValid = false;
    }
  });

  async function fetchPincodeData(pin) {
    cityInput.placeholder = "Fetching details...";
    try {
      const response = await fetch(`https://api.postalpincode.in/pincode/${pin}`);
      const data = await response.json();

      if (data[0].Status === "Success") {
        const postOffice = data[0].PostOffice[0];
        cityInput.value = postOffice.Block !== "NA" ? postOffice.Block : postOffice.Name;
        districtInput.value = postOffice.District;
        stateSelect.value = postOffice.State;
        
        isPincodeValid = true;
        setFieldsReadOnly(true);
      } else {
        alert("Invalid Pincode ‚ùó");
        isPincodeValid = false;
        resetPincodeFields();
      }
    } catch (error) {
      alert("Pincode API unavailable. Please enter details manually.");
      setFieldsReadOnly(false);
      isPincodeValid = true; // Allow manual entry as fallback
    } finally {
      cityInput.placeholder = "City *";
    }
  }

  function setFieldsReadOnly(isReadOnly) {
    cityInput.readOnly = isReadOnly;
    districtInput.readOnly = isReadOnly;
    stateSelect.style.pointerEvents = isReadOnly ? "none" : "auto";
    stateSelect.style.background = isReadOnly ? "#f9f9f9" : "#fff";
  }

  function resetPincodeFields() {
    cityInput.value = "";
    districtInput.value = "";
    stateSelect.value = "";
  }

  function placeOrder() {
    if (cart.length === 0) {
      alert("Cart is empty üõí");
      return;
    }

    const fullName = document.getElementById("fullName").value.trim();
    const mobile = document.getElementById("mobile").value.trim();
    const house = document.getElementById("house").value.trim();
    const street = document.getElementById("street").value.trim();
    const city = cityInput.value.trim();
    const district = districtInput.value.trim();
    const state = stateSelect.value.trim();
    const pincode = pincodeInput.value.trim();

    if (!fullName || !mobile || !house || !street || !city || !district || !state || !pincode) {
      alert("Please fill all delivery details ‚ùó");
      return;
    }

    if (mobile.length !== 10) {
      alert("Enter valid 10-digit mobile number");
      return;
    }

    if (!isPincodeValid || pincode.length !== 6) {
      alert("Invalid Pincode. Please check again.");
      return;
    }

    // CONSTRUCT WHATSAPP MESSAGE
    let itemsText = "";
    let grandTotal = 0;
    cart.forEach((item, index) => {
      itemsText += `${index + 1}. ${item.name} (${item.size})\n   Qty: ${item.qty} | Price: ‚Çπ${item.qty * item.price}\n`;
      grandTotal += (item.qty * item.price);
    });

    const message = `*New Order Received* üõçÔ∏è\n\n` +
      `*Items:*\n${itemsText}\n` +
      `*Grand Total: ‚Çπ${grandTotal}*\n\n` +
      `*Customer Details:* \n` +
      `*Name:* ${fullName}\n` +
      `*Mobile:* ${mobile}\n` +
      `*Address:* ${house}, ${street}, ${city}, ${district}, ${state} - ${pincode}`;

    const encodedMessage = encodeURIComponent(message);
    const whatsappUrl = `https://wa.me/917337030406?text=${encodedMessage}`;
    
    window.location.href = whatsappUrl;
  }

  // Initial render
  renderCart();
</script>

</body>
</html>
